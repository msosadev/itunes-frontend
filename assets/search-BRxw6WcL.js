import{w as j,a,o as t,v as S}from"./chunk-NL6KNZEE-COrKcMPs.js";import{S as f,A as w}from"./AlbumsGrid-CH87KVxc.js";import{S as N}from"./SongList-DYnJUKKi.js";import{S as k,G as v}from"./search-Dc49xB7c.js";import{c as T}from"./createLucideIcon-BiP2d-W3.js";import"./SongContext-C9AI-YLp.js";/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],A=T("loader",b);async function $(l,r){const i=await fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(l)}&limit=${r}&entity=musicArtist,musicTrack,album`);if(!i.ok)throw new Response("Failed to fetch artist",{status:i.status});return await i.json()}const C=j(function(){const[r,i]=a.useState(""),[s,n]=a.useState([]),[m,c]=a.useState(!1),[x,p]=a.useState(!1),[y,d]=a.useState(!1),u=a.useId();async function h(){const e=r.trim();if(!e)return;c(!0);let o;try{o=await $(e,25)}catch(g){console.error("Error during search:",g),c(!1),d(!0);return}d(!1),c(!1),p(!0),n(o.results||[])}return a.useEffect(()=>{if(r.trim()==="")return;const e=setTimeout(()=>{r.trim()?h():(n([]),p(!1))},1e3);return()=>clearTimeout(e)},[r]),t.jsxs("div",{className:"wrapper mt-10 space-y-4",children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Search"}),t.jsx("div",{className:`flex flex-col gap-4 p-0.5 magic-gradient after:opacity-0 has-[input:focus]:after:opacity-100 rounded-lg transition-opacity ${m?"opacity-50 pointer-events-none":""}  `,children:t.jsxs("form",{className:"bg-gray-700 rounded-md flex items-center relative z-[1] justify-center w-full",onSubmit:e=>{e.preventDefault(),h()},children:[t.jsx("label",{className:"mx-4",htmlFor:u,children:t.jsx(k,{})}),t.jsx("input",{onChange:e=>i(e.target.value),value:r,id:u,type:"text",className:"w-full h-full p-4 pl-0 outline-0",placeholder:"Search for artists, albums, or songs"})]})}),y&&t.jsx("p",{className:"text-red-300",children:"An error occurred while searching. Please try again."}),t.jsx(A,{className:`animate-spin mx-auto text-gray-500 ${m?"block":"hidden"}`}),s.length>0&&t.jsxs("div",{className:"mt-4",children:[s.filter(e=>e.wrapperType==="artist").length>0&&t.jsxs("div",{children:[t.jsx(f,{title:"Artists"}),t.jsx("ul",{className:"space-y-2",children:s.filter(e=>e.wrapperType==="artist").map((e,o)=>t.jsxs("li",{className:"flex gap-2 items-center",children:[t.jsx(v,{width:20,className:"text-gray-400"}),t.jsx(S,{to:`/artist/${e.artistId}`,children:e.artistName})]},o))})]}),t.jsx(w,{infoToShow:["artistName","releaseDate"],albums:s.filter(e=>e.wrapperType==="collection"),title:"Albums"}),s.filter(e=>e.wrapperType==="track").length>0&&t.jsxs("div",{children:[t.jsx(f,{title:"Songs"}),t.jsx(N,{songs:s.filter(e=>e.wrapperType==="track")})]})]}),s.length===0&&x&&t.jsx("p",{className:"text-gray-500",children:"No results found."})]})});export{C as default};
