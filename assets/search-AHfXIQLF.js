import{w as x,a as r,o as t,v as y}from"./chunk-NL6KNZEE-COrKcMPs.js";import{S as u,A as j}from"./AlbumsGrid-CH87KVxc.js";import{S as g}from"./SongList-Bog9AVuq.js";import{S,G as w}from"./search-Dc49xB7c.js";import{c as N}from"./createLucideIcon-BiP2d-W3.js";import"./SongContext-PlMwVy4w.js";/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],v=N("loader",k);async function T(c,a){const i=await fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(c)}&limit=${a}&entity=musicArtist,musicTrack,album`);if(!i.ok)throw new Response("Failed to fetch artist",{status:i.status});return await i.json()}const M=x(function(){const[a,i]=r.useState(""),[s,n]=r.useState([]),[l,m]=r.useState(!1),[f,p]=r.useState(!1),d=r.useId();async function h(){const e=a.trim();if(!e)return;m(!0);const o=await T(e,25);m(!1),p(!0),n(o.results||[])}return r.useEffect(()=>{const e=setTimeout(()=>{a.trim()?h():(n([]),p(!1))},1e3);return()=>clearTimeout(e)},[a]),t.jsxs("div",{className:"wrapper my-10 space-y-4",children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Search"}),t.jsx("div",{className:`flex flex-col gap-4 p-0.5 magic-gradient after:opacity-0 has-[input:focus]:after:opacity-100 rounded-lg transition-opacity ${l?"opacity-50 pointer-events-none":""}  `,children:t.jsxs("form",{className:"bg-gray-700 rounded-md flex items-center relative z-[1] justify-center w-full",onSubmit:e=>{e.preventDefault(),h()},children:[t.jsx("label",{className:"mx-4",htmlFor:d,children:t.jsx(S,{})}),t.jsx("input",{onChange:e=>i(e.target.value),value:a,id:d,type:"text",className:"w-full h-full p-4 pl-0 outline-0",placeholder:"Search for artists, albums, or songs"})]})}),t.jsx(v,{className:`animate-spin mx-auto text-gray-500 ${l?"block":"hidden"}`}),s.length>0&&t.jsxs("div",{className:"mt-4",children:[s.filter(e=>e.wrapperType==="artist").length>0&&t.jsxs("div",{children:[t.jsx(u,{title:"Artists"}),t.jsx("ul",{className:"space-y-2",children:s.filter(e=>e.wrapperType==="artist").map((e,o)=>t.jsxs("li",{className:"flex gap-2 items-center",children:[t.jsx(w,{width:20,className:"text-gray-400"}),t.jsx(y,{to:`/artist/${e.artistId}`,children:e.artistName})]},o))})]}),t.jsx(j,{infoToShow:["artistName","releaseDate"],albums:s.filter(e=>e.wrapperType==="collection"),title:"Albums"}),s.filter(e=>e.wrapperType==="track").length&&t.jsxs("div",{children:[t.jsx(u,{title:"Songs"}),t.jsx(g,{songs:s.filter(e=>e.wrapperType==="track")})]})]}),s.length===0&&f&&t.jsx("p",{className:"text-gray-500",children:"No results found."})]})});export{M as default};
