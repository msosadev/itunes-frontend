import{w as x,a as r,o as t}from"./chunk-NL6KNZEE-Dc8vaAUU.js";import{S as u,A as y}from"./AlbumsGrid-DAUWK49j.js";import{S as j}from"./SongList-Bj2bMWQH.js";import{S as g,G as S}from"./search-12kafhEf.js";import{c as w}from"./createLucideIcon-C0lJV8vF.js";/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],k=w("loader",N);async function v(o,a){const i=await fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(o)}&limit=${a}&entity=musicArtist,musicTrack,album`);if(!i.ok)throw new Response("Failed to fetch artist",{status:i.status});return await i.json()}const R=x(function(){const[a,i]=r.useState(""),[s,l]=r.useState([]),[n,m]=r.useState(!1),[f,p]=r.useState(!1),d=r.useId();async function h(){const e=a.trim();if(!e)return;m(!0);const c=await v(e,25);m(!1),p(!0),l(c.results||[])}return r.useEffect(()=>{const e=setTimeout(()=>{a.trim()?h():(l([]),p(!1))},1e3);return()=>clearTimeout(e)},[a]),t.jsxs("div",{className:"wrapper my-10 space-y-4",children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Search"}),t.jsx("div",{className:`flex flex-col gap-4 p-0.5 magic-gradient after:opacity-0 has-[input:focus]:after:opacity-100 rounded-lg transition-opacity ${n?"opacity-50 pointer-events-none":""}  `,children:t.jsxs("form",{className:"bg-gray-700 rounded-md flex items-center relative z-[1] justify-center w-full",onSubmit:e=>{e.preventDefault(),h()},children:[t.jsx("label",{className:"mx-4",htmlFor:d,children:t.jsx(g,{})}),t.jsx("input",{onChange:e=>i(e.target.value),value:a,id:d,type:"text",className:"w-full h-full p-4 pl-0 outline-0",placeholder:"Search for artists, albums, or songs"})]})}),t.jsx(k,{className:`animate-spin mx-auto text-gray-500 ${n?"block":"hidden"}`}),s.length>0&&t.jsxs("div",{className:"mt-4",children:[s.filter(e=>e.wrapperType==="artist").length>0&&t.jsxs("div",{children:[t.jsx(u,{title:"Artists"}),t.jsx("ul",{className:"space-y-2",children:s.filter(e=>e.wrapperType==="artist").map((e,c)=>t.jsxs("li",{className:"flex gap-2 items-center",children:[t.jsx(S,{width:20,className:"text-gray-400"}),t.jsx("a",{href:`/artist/${e.artistId}`,children:e.artistName})]},c))})]}),t.jsx(y,{infoToShow:["artistName","releaseDate"],albums:s.filter(e=>e.wrapperType==="collection"),title:"Albums"}),s.filter(e=>e.wrapperType==="track").length&&t.jsxs("div",{children:[t.jsx(u,{title:"Songs"}),t.jsx(j,{songs:s.filter(e=>e.wrapperType==="track")})]})]}),s.length===0&&f&&t.jsx("p",{className:"text-gray-500",children:"No results found."})]})});export{R as default};
